(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{598:function(t,e,n){"use strict";n.r(e);n(44),n(307),n(65),n(53);var r=n(14),c=n(28),o=n(36),l=n(40),v=n(35),f=n(29),d=n(9),h=n(164),m=n(124),y=n.n(m);function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var _=function(t,e,n,desc){var r,c=arguments.length,o=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(o=(c<3?r(o):c>3?r(e,n,o):r(e,n))||o);return c>3&&o&&Object.defineProperty(e,n,o),o},k=function(t){Object(l.a)(f,t);var e,n,v=C(f);function f(){var t;return Object(c.a)(this,f),(t=v.apply(this,arguments)).baseUrl="https://toyo-bunko.github.io/paper_app",t.selectedFile=null,t.isSelecting=!1,t.loading=!1,t.confidences=[],t.imageUrl="",t.items=[{image:"https://raw.githubusercontent.com/nakamura196/tmp/main/PCG006%C3%97500-5.jpg",label:"PCG006（皮紙）"},{image:"https://raw.githubusercontent.com/nakamura196/tmp/main/ZDH018%C3%97500-5.jpg",label:"ZDH018（竹紙）"}],t.labels=["皮紙","竹紙"],t}return Object(o.a)(f,[{key:"onButtonClick",value:function(){var t=this;this.isSelecting=!0,window.addEventListener("focus",(function(){t.isSelecting=!1}),{once:!0}),this.$refs.uploader.click()}},{key:"onFileChanged",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,c,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,n=e.target.files[0],this.selectedFile=n,r=new FileReader,c=this,r.onload=function(t){c.imageUrl=t.target.result},r.readAsDataURL(n),(o=new FormData).append("file",n),t.next=11,y.a.post("https://desolate-hollows-71015.herokuapp.com/upload",o);case 11:l=t.sent,this.confidences=this.convert2confidences(l),this.loading=!1;case 14:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"changeImageUrl",value:function(){this.confidences=[]}},{key:"predict",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.imageUrl=e,this.loading=!0,t.next=4,y.a.get("https://desolate-hollows-71015.herokuapp.com/predict?url="+e);case 4:n=t.sent,this.confidences=this.convert2confidences(n),this.loading=!1;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"head",value:function(){return{title:this.$t("Predict")}}},{key:"convert2confidences",value:function(t){for(var e=t.data.Confidences,n={},r=this.labels,i=0;i<r.length;i++){var label=r[i];n[label]=Math.floor(100*e[i])}var c=Object.keys(n).map((function(t){return{key:t,value:n[t]}}));c.sort((function(a,b){return a.value<b.value?1:a.value>b.value?-1:0}));for(var o=[],l=0;l<c.length;l++){var v=c[l];o.push({label:v.key,value:v.value})}return o}}]),f}(h.Vue);_([Object(h.Watch)("imageUrl")],k.prototype,"changeImageUrl",null);var w=k=_([Object(h.Component)({})],k),j=n(98),R=n(129),O=n.n(R),x=n(496),U=n(505),V=n(586),P=n(502),D=n(201),F=n(306),E=n(200),S=n(504),I=n(587),component=Object(j.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",{staticClass:"py-5"},[n("h1",{staticClass:"my-5"},[t._v("皮紙・竹紙の分類アプリ")]),t._v(" "),n("p",[t._v("\n      アップロードされた画像が皮紙か竹紙かを機械が判別します。500倍の画像の利用をおすすめします。\n    ")]),t._v(" "),t.imageUrl?[t.imageUrl?n("v-row",{staticClass:"mt-5"},[n("v-col",{attrs:{cols:"12",sm:8}},[n("v-card",{staticClass:"mb-4",attrs:{"no-body":"",flat:""}},[n("v-img",{attrs:{src:t.imageUrl,"max-height":"300px",contain:""}},[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[t.loading?n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}}):t._e()],1)],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:4}},[n("v-card",{staticClass:"mb-4",attrs:{"no-body":""}},[n("div",{staticClass:"pa-4"},t._l(t.confidences,(function(e,r){return n("div",{key:r,staticClass:"mb-2"},[n("v-row",[n("v-col",[t._v(t._s(e.label))]),t._v(" "),n("v-col",{staticClass:"text-right"},[t._v(t._s(e.value)+"%")])],1),t._v(" "),n("v-progress-linear",{attrs:{value:e.value}})],1)})),0)]),t._v(" "),n("div",{staticClass:"text-right"},[n("v-btn",{staticClass:"ma-1",attrs:{depressed:"",large:""},on:{click:function(e){t.imageUrl=""}}},[n("v-icon",{staticClass:"mr-2"},[t._v("mdi-reload")]),t._v(" RESET")],1)],1)],1)],1):t._e()]:[n("v-btn",{staticClass:"my-10",attrs:{"x-large":"",depressed:"",loading:t.isSelecting,color:"primary",block:""},on:{click:t.onButtonClick}},[n("v-icon",{staticClass:"mr-2"},[t._v("mdi-upload")]),t._v(" NEW FILE")],1),t._v(" "),n("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:t.onFileChanged}})],t._v(" "),n("h2",{staticClass:"my-5"},[t._v(t._s(t.$t("example")))]),t._v(" "),n("v-row",t._l(t.items,(function(e,r){return n("v-col",{key:r,attrs:{cols:"12",sm:3}},[n("v-card",{staticClass:"mb-4",attrs:{"no-body":"",outlined:""},on:{click:function(n){return t.predict(e.image)}}},[n("v-img",{attrs:{src:e.image}}),t._v(" "),n("div",{staticClass:"pa-4"},[n("h4",[t._v(t._s(e.label))])])],1)],1)})),1)],2)],1)}),[],!1,null,null,null);e.default=component.exports;O()(component,{VBtn:x.a,VCard:U.a,VCol:V.a,VContainer:P.a,VIcon:D.a,VImg:F.a,VProgressCircular:E.a,VProgressLinear:S.a,VRow:I.a})}}]);